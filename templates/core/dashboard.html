{% extends 'base.html' %} {% load static %} {% block title %}Dashboard - Sistema
de Detección de Anemia{% endblock %} {% block content %}
<div class="dashboard-container">
  <!-- Título de bienvenida -->
  <div class="welcome-section">
    <h2 class="welcome-title">Bienvenido al Sistema de Detección de Anemia</h2>
    <p class="welcome-subtitle">
      Sistema inteligente de detección de anemia mediante análisis de la
      conjuntiva palpebral utilizando IA
    </p>
  </div>

  <!-- Tarjetas de estadísticas -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">
        <svg
          width="40"
          height="40"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9 11H7V13H9V11ZM13 11H11V13H13V11ZM17 11H15V13H17V11ZM19 4H18V2H16V4H8V2H6V4H5C3.89 4 3.01 4.9 3.01 6L3 20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4ZM19 20H5V9H19V20Z"
            fill="#8BA3B0"
          />
        </svg>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ stats.analisis_realizados }}</div>
        <div class="stat-label">Análisis Realizados</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <svg
          width="40"
          height="40"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z"
            fill="#8BA3B0"
          />
        </svg>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ stats.reportes_generados }}</div>
        <div class="stat-label">Reportes Generados</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <svg
          width="40"
          height="40"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L14.5 12L19 18H5L8.5 13.5Z"
            fill="#8BA3B0"
          />
        </svg>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ stats.imagenes_cargadas }}</div>
        <div class="stat-label">Imágenes Cargadas</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <svg
          width="40"
          height="40"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M16 11C17.66 11 18.99 9.66 18.99 8C18.99 6.34 17.66 5 16 5C14.34 5 13 6.34 13 8C13 9.66 14.34 11 16 11ZM8 11C9.66 11 10.99 9.66 10.99 8C10.99 6.34 9.66 5 8 5C6.34 5 5 6.34 5 8C5 9.66 6.34 11 8 11ZM8 13C5.67 13 1 14.17 1 16.5V19H15V16.5C15 14.17 10.33 13 8 13ZM16 13C15.71 13 15.38 13.02 15.03 13.05C16.19 13.89 17 15.02 17 16.5V19H23V16.5C23 14.17 18.33 13 16 13Z"
            fill="#8BA3B0"
          />
        </svg>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ stats.pacientes_registrados }}</div>
        <div class="stat-label">Pacientes Registrados</div>
      </div>
    </div>
  </div>

  <!-- Reportes recientes -->
  <div class="reports-section">
    <div class="section-header-row">
      <h3 class="section-title">Reportes Recientes</h3>
      <a href="{% url 'core:reports_list' %}" class="btn-view-all">
        Ver todos los reportes
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" fill="currentColor"/>
        </svg>
      </a>
    </div>

    <div class="reports-grid">
      {% for reporte in reportes_recientes %}
      <div class="report-card" onclick="window.location.href='{% url 'core:report_detail' reporte.id %}'">
        <div class="report-header">
          <svg
            class="report-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L14.5 12L19 18H5L8.5 13.5Z"
              fill="#FFFFFF"
            />
          </svg>
          <span class="report-title">imagen detectada {{ forloop.counter }}</span>
        </div>

        <div class="report-body">
          <div class="report-type">Reporte anemia</div>
          <div class="report-info">
            <span class="report-label">Paciente:</span>
            <span class="report-value">{{ reporte.paciente.nombre }} {{ reporte.paciente.apellido }}</span>
          </div>
          <div class="report-info">
            <span class="report-label">Diagnóstico:</span>
            <span class="report-value {% if reporte.tiene_anemia %}diagnosis-positive{% else %}diagnosis-negative{% endif %}">
              {% if reporte.tiene_anemia %}Positivo{% else %}Negativo{% endif %}
            </span>
          </div>
          <div class="report-date">
            Análisis realizado el {{ reporte.fecha_analisis|date:"d \d\e F, Y" }}
          </div>
        </div>
      </div>
      {% empty %}
      <div class="no-reports">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z" fill="#8BA3B0" opacity="0.3"/>
        </svg>
        <p>No hay reportes disponibles</p>
        <a href="{% url 'core:analysis' %}" class="btn-create-report">Crear primer análisis</a>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
